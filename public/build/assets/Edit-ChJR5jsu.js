import{r as v,x as y,T as k,c as w,w as h,a as e,t as c,h as C,d as n,e as u,i as m,n as p,u as o,v as b,o as i,F as V,g as X,b as B,k as M,f as N}from"./app-dpu5PEVj.js";import{_ as j}from"./AppLayout-BFf-_mQt.js";import"./ResponsiveNavLink-BeCtZKXS.js";const D={class:"min-h-screen bg-gray-100"},S={class:"bg-white shadow"},T={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},U={class:"text-lg font-medium text-gray-900"},I={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},P={class:"bg-white shadow rounded-lg overflow-hidden"},E={class:"px-6 py-5"},F={class:"grid grid-cols-6 gap-6"},q={class:"col-span-6 sm:col-span-2"},z={class:"mt-1 flex rounded-md shadow-sm"},W={class:"relative flex-grow"},$={key:0,class:"mt-1 text-sm text-red-600"},K={class:"px-6 pb-5"},L={class:"grid grid-cols-6 gap-6"},O={class:"col-span-6 sm:col-span-2"},A={key:0,class:"mt-1 text-sm text-red-600"},G={class:"col-span-6 sm:col-span-2"},H={key:0,class:"mt-1 text-sm text-red-600"},J={class:"col-span-6 sm:col-span-2"},Q={key:0,class:"mt-1 text-sm text-red-600"},R={class:"px-6 pb-5 bg-gray-50"},Y={class:"grid grid-cols-6 gap-6"},Z={class:"col-span-6"},ee={key:0,class:"mt-1 text-sm text-red-600"},te={key:0,class:"px-6 py-5 border-t border-gray-200"},se={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},oe=["src","alt"],re={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 flex items-center justify-center rounded-md transition-opacity"},le=["href"],ie={class:"px-6 py-3 bg-gray-50 text-right border-t border-gray-200"},ne=["disabled"],de={key:0},ae={key:1},pe={__name:"Edit",props:{ticket:{type:Object,required:!0}},setup(g){const d=g,a=v("");y(()=>{if(d.ticket.customer_phone){let l=String(d.ticket.customer_phone).replace(/\D/g,"");l=l.replace(/^966/,""),a.value=l.startsWith("0")?l.substring(1):l}});const s=k({customer_phone:d.ticket.customer_phone,vehicle_make:d.ticket.vehicle_make,vehicle_model:d.ticket.vehicle_model,vehicle_color:d.ticket.vehicle_color,license_plate:d.ticket.license_plate,special_instructions:d.ticket.special_instructions}),_=()=>{const l=a.value.replace(/\D/g,"").substring(0,10);a.value=l,l.length>=9?s.customer_phone="966"+(l.startsWith("0")?l.substring(1):l):s.customer_phone=""},x=()=>{a.value&&a.value.length<9||(console.log(s.data()),s.put(route("tenant.tickets.update",d.ticket.id)))};return(l,t)=>(i(),w(j,null,{default:h(()=>[e("div",D,[e("div",S,[e("div",T,[e("h2",U,"Edit Ticket #"+c(g.ticket.ticket_number),1)])]),e("div",I,[e("div",P,[e("form",{id:"ticket-form",onSubmit:C(x,["prevent"])},[t[15]||(t[15]=e("div",{class:"px-6 py-5 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Customer Info")],-1)),e("div",E,[e("div",F,[e("div",q,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Customer Phone Number",-1)),e("div",z,[e("div",W,[t[6]||(t[6]=e("div",{class:"absolute inset-y-0 left-0 flex items-center"},[e("label",{for:"country",class:"sr-only"},"Country"),e("div",{class:"h-12 py-0 pl-3 pr-2 border-r border-gray-300 bg-gray-50 flex items-center justify-center text-gray-500 sm:text-sm"}," ðŸ‡¸ðŸ‡¦ +966 ")],-1)),m(e("input",{type:"tel",required:"","onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),class:p(["h-12 focus:ring-blue-500 focus:border-blue-500 block w-full pl-20 sm:text-sm border-gray-300 rounded-md",{"border-red-500":o(s).errors.customer_phone||a.value&&a.value.length<9}]),placeholder:"5XXXXXXXX",pattern:"[0-9]{9,10}",minlength:"9",maxlength:"10",inputmode:"numeric",onInput:_,onKeydown:t[1]||(t[1]=r=>{!/^[0-9\b]+$/.test(r.key)&&r.key!=="Backspace"&&r.key!=="Delete"&&r.key!=="Tab"&&r.preventDefault()})},null,34),[[b,a.value]])])]),o(s).errors.customer_phone?(i(),n("p",$,c(o(s).errors.customer_phone),1)):u("",!0)])])]),e("div",K,[e("div",L,[e("div",O,[t[8]||(t[8]=e("label",{for:"vehicle_make",class:"block text-sm font-medium text-gray-700 mb-1"},"Car Brand",-1)),m(e("input",{type:"text",id:"vehicle_make","onUpdate:modelValue":t[2]||(t[2]=r=>o(s).vehicle_make=r),class:p(["h-12 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o(s).errors.vehicle_make}])},null,2),[[b,o(s).vehicle_make]]),o(s).errors.vehicle_make?(i(),n("p",A,c(o(s).errors.vehicle_make),1)):u("",!0)]),e("div",G,[t[9]||(t[9]=e("label",{for:"vehicle_model",class:"block text-sm font-medium text-gray-700 mb-1"},"Car Model",-1)),m(e("input",{type:"text",id:"vehicle_model","onUpdate:modelValue":t[3]||(t[3]=r=>o(s).vehicle_model=r),class:p(["h-12 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o(s).errors.vehicle_model}])},null,2),[[b,o(s).vehicle_model]]),o(s).errors.vehicle_model?(i(),n("p",H,c(o(s).errors.vehicle_model),1)):u("",!0)]),e("div",J,[t[10]||(t[10]=e("label",{for:"license_plate",class:"block text-sm font-medium text-gray-700 mb-1"},"Car Plate",-1)),m(e("input",{type:"text",id:"license_plate","onUpdate:modelValue":t[4]||(t[4]=r=>o(s).license_plate=r),class:p(["h-12 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o(s).errors.license_plate}])},null,2),[[b,o(s).license_plate]]),o(s).errors.license_plate?(i(),n("p",Q,c(o(s).errors.license_plate),1)):u("",!0)])])]),e("div",R,[e("div",Y,[e("div",Z,[t[11]||(t[11]=e("label",{for:"special_instructions",class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),m(e("textarea",{id:"special_instructions","onUpdate:modelValue":t[5]||(t[5]=r=>o(s).special_instructions=r),rows:"3",class:p(["h-28 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":o(s).errors.special_instructions}])},null,2),[[b,o(s).special_instructions]]),o(s).errors.special_instructions?(i(),n("p",ee,c(o(s).errors.special_instructions),1)):u("",!0)])])]),g.ticket.images.length>0?(i(),n("div",te,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Car Images",-1)),e("div",se,[(i(!0),n(V,null,X(g.ticket.images,(r,f)=>(i(),n("div",{key:r.id,class:"relative group"},[e("img",{src:r.url,alt:"Vehicle image "+(f+1),class:"h-32 w-full object-cover rounded-md"},null,8,oe),e("div",re,[e("a",{href:r.url,target:"_blank",class:"text-white p-2 hover:text-gray-200",title:"View Full Size"},[...t[12]||(t[12]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)])],8,le)])]))),128))])])):u("",!0),e("div",ie,[B(o(M),{href:l.route("tenant.dashboard"),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:h(()=>[...t[14]||(t[14]=[N(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",class:"ml-3 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:o(s).processing},[o(s).processing?(i(),n("span",de," Saving... ")):(i(),n("span",ae,"Save Changes"))],8,ne)])],32)])])])]),_:1}))}};export{pe as default};
