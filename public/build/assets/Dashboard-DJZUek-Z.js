import{s as _e,r as a,m as T,x as Ce,y as Te,c as Se,w as N,a as t,d as m,e as A,t as d,b as F,u as E,k as H,i as v,z as B,v as I,n as S,o as c,F as O,g as Y,A as Q}from"./app-BIswqkTy.js";import{_ as je}from"./AppLayout-DU4XN1pG.js";import{P as oe}from"./bootstrap-Babreq_b.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-AUx0FhGi.js";const Me={class:"py-6 md:py-10"},$e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ae={class:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6"},Ee={class:"rounded-2xl bg-white shadow border border-gray-100"},Re={class:"p-6 flex items-center justify-center"},Pe={class:"flex flex-col items-center justify-center"},Ve={class:"mt-1 text-3xl font-semibold"},qe={class:"rounded-2xl bg-white shadow border border-gray-100"},Ne={class:"p-6 flex items-center justify-center"},Be={class:"flex flex-col items-center justify-center"},Oe={class:"mt-1 text-3xl font-semibold"},Le={class:"rounded-2xl bg-white shadow border border-gray-100"},Ue={class:"p-6 flex items-center justify-center"},ze={class:"flex flex-col items-center justify-center"},Fe={class:"mt-1 text-3xl font-semibold"},He={class:"mt-6 md:mt-8"},Ie={class:"mt-6 md:mt-8"},Ye={class:"rounded-2xl bg-white shadow border border-gray-100 px-4 md:px-6 py-6"},Qe={class:"flex flex-col md:flex-row md:items-center md:space-x-6 space-y-4 md:space-y-0"},Ge={class:"flex-1 flex flex-col md:flex-row gap-3 md:gap-0"},Ke={class:"w-full md:w-48"},Xe={class:"w-full"},We=["placeholder"],Je={class:"mt-6 md:mt-8"},Ze={class:"mt-2"},et={class:"rounded-2xl bg-white shadow border border-gray-100"},tt={class:"px-4 md:px-6 pt-5 flex items-center justify-between"},st={class:"flex space-x-6"},ot={class:"flex items-center space-x-6 text-gray-700 font-medium"},lt={class:"mt-4 overflow-x-auto"},rt={class:"min-w-full divide-y divide-gray-200"},nt={key:0},at={class:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap"},it={class:"px-6 py-4 whitespace-nowrap"},dt=["onClick","disabled"],ut={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},ct={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},pt={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},mt={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},vt={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},xt={class:"px-6 py-4 text-sm text-gray-700 whitespace-nowrap"},ft={class:"px-6 py-4 text-sm text-gray-700 flex items-center space-x-3"},bt=["onClick"],gt={class:"px-4 md:px-6 py-4 flex items-center justify-between"},ht={class:"flex items-center space-x-2"},yt={class:"flex items-center space-x-2"},wt=["disabled"],kt={class:"px-3"},_t=["disabled"],Ct={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Tt={class:"relative w-full max-w-lg mx-auto bg-white rounded-2xl shadow-xl"},St={class:"px-6 py-4 flex items-center justify-between border-b"},jt={class:"px-6 py-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Dt=["value"],Mt=["value"],$t={class:"px-6 pb-6 flex flex-col space-y-3 items-center justify-between"},At={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},Et={class:"relative w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl"},Rt={class:"px-6 py-4 flex items-center justify-between border-b"},Pt={class:"px-6 py-6 space-y-3"},Vt={class:"px-6 pb-6"},qt=["disabled"],Nt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},Bt={class:"relative w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl"},Ot={class:"px-6 py-4 flex items-center justify-between border-b"},Lt={class:"text-lg font-semibold text-gray-800"},Ut={class:"px-6 py-6 text-center"},zt={class:"inline-block p-3 border rounded-xl"},Ft=["src"],le=5e3,Ht="/icons/print.svg",It={__name:"Dashboard",props:{stats:Object,recentTickets:{type:Array,default:()=>[]},sites:{type:Array,default:()=>[]},currentSite:{type:String,default:""},auth:{type:Object,default:()=>({})}},setup(R,{expose:re}){var te,se;const{proxy:P}=_e(),n=R;a(!1);const ne=T(()=>n.sites&&n.sites.length?n.sites:[{label:n.currentSite||"Sales Center Diriyah",value:n.currentSite||"sales-center-diriyah"}]);a(localStorage.getItem("uv:selectedSite")||((te=ne.value[0])==null?void 0:te.label)||"Sales Center Diriyah");const j=a("all"),x=a(""),V=a(""),ae=T(()=>x.value==="phone"?"Request Search":x.value==="ticket"?"Ticket Number":x.value==="plate"?"Car Plate":"Request Search"),G=T(()=>n.recentTickets?j.value==="requested"?n.recentTickets.filter(s=>s.status==="in_progress"):n.recentTickets:[]),L=T(()=>{if(!V.value)return G.value;const s=String(V.value).toLowerCase();return G.value.filter(e=>x.value==="phone"?String(e.customer_phone||e.customer_phone_number||"").toLowerCase().includes(s):x.value==="ticket"?String(e.reference||e.id||"").toLowerCase().includes(s):x.value==="plate"?String(e.car_plate||"").toLowerCase().includes(s):String(e.reference||"").toLowerCase().includes(s)||String(e.customer_phone||"").toLowerCase().includes(s))}),D=a(10),f=a(1),U=T(()=>Math.max(1,Math.ceil(L.value.length/D.value))),ie=T(()=>{f.value>U.value&&(f.value=U.value);const s=(f.value-1)*D.value;return L.value.slice(s,s+D.value)}),de=()=>{},ue=s=>{const e=String(s||"").toLowerCase();return e.includes("pending")?"bg-amber-100 text-amber-700":e.includes("in_progress")?"bg-blue-100 text-blue-700":e.includes("ready")?"bg-fuchsia-100 text-fuchsia-700":e.includes("delivered")||e.includes("deliver")?"bg-emerald-100 text-emerald-700":e.includes("cancelled")?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"},ce=s=>s?new Date(s).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"-",pe=s=>{const e=String(s||"").toLowerCase();return e==="pending"?"CAR PARKED":e==="in_progress"?"CAR REQUESTED BY CUSTOMER":e==="ready"?"CAR READY BY EMPLOYEE":e==="delivered"?"CAR DELIVERED BY EMPLOYEE":e==="cancelled"||e==="canceled"?"CANCELLED":(s||"").toString().replaceAll("_"," ").toUpperCase()},g=a(!1),K=a(new Date().toISOString().slice(0,10)),X=a(new Date().toISOString().slice(0,10)),W=Array.from({length:24},(s,e)=>{const l=(e+11)%12+1,r=e<12?"AM":"PM";return`${l}:00${r}`}),J=a("12:00PM"),Z=a("4:00AM"),me=()=>{g.value=!1,P.$toast.success("Report filters applied")},M=a(!1),i=a("ready"),b=a(null),ve=s=>{b.value=s,s.status==="pending"||s.status==="in_progress"?i.value="ready":s.status==="ready"&&(i.value="delivered"),M.value=!0},xe=async()=>{var s,e;if(b.value)try{const r=(await axios.post(route("tenant.tickets.status.update",{ticket:b.value.id}),{status:i.value})).data.ticket,u=n.recentTickets.findIndex(p=>p.id===r.id);u!==-1&&(n.recentTickets[u]={...n.recentTickets[u],...r}),M.value=!1,P.$toast.success("Ticket status updated successfully!")}catch(l){console.error("Error updating ticket status:",l);const r=((e=(s=l.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to update ticket status. Please try again.";P.$toast.error(r)}};a([]);const ee=s=>{var y;console.log("Showing notification:",s);const e=s.title?`${s.title}`:"",l=s.message?`${s.message}`:"",r=s.url?" View Details →":"",u=[e,l].filter(Boolean).join(" — ")+r,p={position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,toastClassName:"!bg-white !text-gray-800 !shadow-lg",bodyClassName:"!p-4 !text-sm whitespace-pre-line"},h=((y=s.action)==null?void 0:y.onClick)||(s.url?()=>{window.location.href=s.url}:null);h&&(p.onClick=h),P.$toast.info(u.trim(),p)},k=a(null),z=a(null),fe=a(null),be=((se=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:se.content)||"",_=a({}),C=new Map,ge=s=>{if(!s)return;C.has(s)&&clearTimeout(C.get(s)),_.value={..._.value,[s]:!0};const e=setTimeout(()=>{const{[s]:l,...r}=_.value;_.value=r,C.delete(s)},le);C.set(s,e)},he=()=>{try{const s=window.AudioContext||window.webkitAudioContext;if(!s)return;const e=new s,l=e.createOscillator(),r=e.createGain();l.type="square",l.connect(r),r.connect(e.destination);const u=[960,720];let p=0;const h=300,y=Date.now()+le,$=o=>{const w=e.currentTime;l.frequency.setValueAtTime(o,w),r.gain.cancelScheduledValues(w),r.gain.setValueAtTime(1e-4,w),r.gain.linearRampToValueAtTime(.5,w+.015),r.gain.exponentialRampToValueAtTime(1e-4,w+.18)};l.start(),$(u[p]);const q=setInterval(()=>{if(Date.now()>=y){clearInterval(q),l.stop(e.currentTime+.05),e.close();return}p=(p+1)%u.length,$(u[p])},h)}catch(s){console.error("Alarm sound failed:",s)}},ye=s=>{if(!(s!=null&&s.ticket_id))return;const e=n.recentTickets.findIndex(l=>l.id===s.ticket_id);e!==-1&&(n.recentTickets[e]={...n.recentTickets[e],status:s.status??n.recentTickets[e].status}),ge(s.ticket_id),he()},we=()=>{var s,e;try{oe.logToConsole=!0,k.value=new oe("14602cb8bb24782a9fb8",{cluster:"ap2",forceTLS:!0,encrypted:!0,authEndpoint:"/broadcasting/auth",auth:{headers:{"X-CSRF-TOKEN":be,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}}),console.log("Pusher initialized with key:","14602cb8bb24782a9fb8"),(e=(s=n.auth)==null?void 0:s.user)!=null&&e.id&&(console.log("Subscribing to private-user channel for user:",n.auth.user.id),z.value=k.value.subscribe(`private-user.${n.auth.user.id}`),z.value.bind("vehicle.requested",l=>{console.log("Car requested:",l),ye(l),ee({title:"New Vehicle Request",message:l.message,type:"info",action:l.ticket_id?{text:"View",onClick:()=>{window.location.href=route("tenant.tickets.show",l.ticket_id)}}:null,ticketId:l.ticket_id})}))}catch(l){console.error("Error initializing Pusher:",l)}};Ce(()=>{we()}),Te(()=>{var s,e,l,r;k.value&&(z.value&&k.value.unsubscribe(`private-user.${(e=(s=n.auth)==null?void 0:s.user)==null?void 0:e.id}`),fe.value&&k.value.unsubscribe(`private-organization.${(r=(l=n.auth)==null?void 0:l.user)==null?void 0:r.tenant_id}`),C.forEach(u=>clearTimeout(u)),C.clear(),_.value={},k.value.disconnect())});const ke=s=>{window.open(route("tenant.tickets.print",{ticket:s.id}),"_blank","width=800,height=600")};return re({showNotification:ee}),(s,e)=>(c(),Se(je,{title:"Dashboard"},{default:N(()=>{var l,r,u,p,h,y,$,q;return[t("div",Me,[t("div",$e,[t("div",Ae,[t("div",Ee,[t("div",Re,[t("div",Pe,[e[26]||(e[26]=t("p",{class:"text-sm text-gray-500"},"New",-1)),t("p",Ve,d(((l=R.stats)==null?void 0:l.new_count)??0),1)])])]),t("div",qe,[t("div",Ne,[t("div",Be,[e[27]||(e[27]=t("p",{class:"text-sm text-gray-500"},"Requested",-1)),t("p",Oe,d(((r=R.stats)==null?void 0:r.requested_count)??0),1)])])]),t("div",Le,[t("div",Ue,[t("div",ze,[e[28]||(e[28]=t("p",{class:"text-sm text-gray-500"},"Delivered",-1)),t("p",Fe,d(((u=R.stats)==null?void 0:u.delivered_count)??0),1)])])])]),t("div",He,[F(E(H),{href:s.route("tenant.tickets.create"),class:"block bg-primary w-full inline-flex items-center justify-center rounded-full text-white h-12 px-6 md:px-10 font-medium"},{default:N(()=>[...e[29]||(e[29]=[t("span",{class:"text-lg"},"+ Add Ticket",-1)])]),_:1},8,["href"])]),t("div",Ie,[t("div",Ye,[t("div",Qe,[t("div",Ge,[t("div",Ke,[v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),class:"block w-full h-12 rounded-xl border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 text-gray-700"},[...e[30]||(e[30]=[t("option",{disabled:"",value:""},"Select Search By",-1),t("option",{value:"phone"},"Customer Phone Number",-1),t("option",{value:"ticket"},"Ticket Number",-1),t("option",{value:"plate"},"Car Plate",-1)])],512),[[B,x.value]])]),t("div",Xe,[v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>V.value=o),placeholder:ae.value,class:"block w-full h-12 rounded-xl border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 px-4 md:ml-3"},null,8,We),[[I,V.value]])])])])])]),t("div",Je,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>g.value=!0),class:"w-full md:w-auto inline-flex items-center justify-center h-12 px-6 rounded-full border border-indigo-300 text-indigo-700 hover:bg-indigo-50"},"Daily Report")]),t("div",Ze,[t("div",et,[t("div",tt,[t("div",st,[t("button",{onClick:e[3]||(e[3]=o=>j.value="all"),class:S([j.value==="all"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-primary","pb-3 font-semibold focus:outline-none transition-colors duration-200"])}," All Tickets ",2),t("button",{onClick:e[4]||(e[4]=o=>j.value="requested"),class:S([j.value==="requested"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-primary","pb-3 font-semibold focus:outline-none transition-colors duration-200"])}," Requested Cars ",2)]),t("div",ot,[t("button",{class:"hover:text-primary transition-colors duration-200",onClick:de}," Sort "),t("button",{class:"hover:text-primary transition-colors duration-200",onClick:e[5]||(e[5]=o=>g.value=!0)}," Date ")])]),t("div",lt,[t("table",rt,[e[35]||(e[35]=t("thead",{class:"bg-indigo-900/95 text-white"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Ticket Number"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Status"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Customer Need Car at"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Customer Phone Number"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Total Price/Payment Status"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Car Brand"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Car Plate"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold whitespace-nowrap"},"Note"),t("th",{class:"px-6 py-3 text-left text-sm font-semibold"})])],-1)),t("tbody",null,[L.value.length===0?(c(),m("tr",nt,[...e[31]||(e[31]=[t("td",{colspan:"9",class:"px-6 py-16 text-center text-gray-500"},[t("div",{class:"inline-flex flex-col items-center"},[t("svg",{class:"h-12 w-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7h18M3 12h18M3 17h18"})]),t("span",{class:"mt-3"},"No Data")])],-1)])])):A("",!0),(c(!0),m(O,null,Y(ie.value,o=>(c(),m("tr",{key:o.id,class:S(["odd:bg-white even:bg-gray-50 transition ring-offset-2",_.value[o.id]?"ticket-highlight ring-2 ring-red-500":""])},[t("td",at,d(o.reference),1),t("td",it,[t("button",{onClick:w=>o.status!=="delivered"&&ve(o),class:S([[ue(o.status),o.status==="delivered"?"opacity-70 cursor-not-allowed":"cursor-pointer"],"px-3 py-1 rounded-full text-xs font-semibold uppercase"]),disabled:o.status==="delivered"},d(pe(o.status)),11,dt)]),t("td",ut,d(ce(o.need_at)),1),t("td",ct,d(o.customer_phone||o.customer_phone_number||"-"),1),t("td",pt,d(o.total_price??"Free"),1),t("td",mt,d(o.car_brand||"-"),1),t("td",vt,d(o.car_plate||"-"),1),t("td",xt,d(o.note||"-"),1),t("td",ft,[F(E(H),{href:s.route("tenant.tickets.show",o.id),class:"hover:text-indigo-900"},{default:N(()=>[...e[32]||(e[32]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),_:1},8,["href"]),F(E(H),{href:s.route("tenant.tickets.edit",o.id),class:"text-black-500 mr-3"},{default:N(()=>[...e[33]||(e[33]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),t("button",{class:"hover:text-indigo-900",onClick:w=>ke(o)},[...e[34]||(e[34]=[t("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])],8,bt)])],2))),128))])])]),t("div",gt,[t("div",ht,[v(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>D.value=o),class:"h-9 rounded-lg border-gray-300 text-sm"},[...e[36]||(e[36]=[t("option",{value:10},"10 / page",-1),t("option",{value:20},"20 / page",-1),t("option",{value:50},"50 / page",-1)])],512),[[B,D.value,void 0,{number:!0}]])]),t("div",yt,[t("button",{class:"h-9 w-9 rounded-md border border-gray-300 disabled:opacity-40",disabled:f.value===1,onClick:e[7]||(e[7]=o=>f.value--)},"«",8,wt),t("span",kt,d(f.value),1),t("button",{class:"h-9 w-9 rounded-md border border-gray-300 disabled:opacity-40",disabled:f.value>=U.value,onClick:e[8]||(e[8]=o=>f.value++)},"»",8,_t)])])])])])]),g.value?(c(),m("div",Ct,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[9]||(e[9]=o=>g.value=!1)}),t("div",Tt,[t("div",St,[e[37]||(e[37]=t("h3",{class:"text-lg font-semibold text-gray-800"},"Select Date",-1)),t("button",{class:"text-red-500",onClick:e[10]||(e[10]=o=>g.value=!1)},"✕")]),t("div",jt,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm text-gray-600 mb-1"},"From",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=o=>K.value=o),class:"block w-full rounded-lg border-gray-300"},null,512),[[I,K.value]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm text-gray-600 mb-1"},"To",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=o=>X.value=o),class:"block w-full rounded-lg border-gray-300"},null,512),[[I,X.value]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm text-gray-600 mb-1"},"From",-1)),v(t("select",{"onUpdate:modelValue":e[13]||(e[13]=o=>J.value=o),class:"block w-full rounded-lg border-gray-300"},[(c(!0),m(O,null,Y(E(W),o=>(c(),m("option",{key:"f-"+o,value:o},d(o),9,Dt))),128))],512),[[B,J.value]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm text-gray-600 mb-1"},"To",-1)),v(t("select",{"onUpdate:modelValue":e[14]||(e[14]=o=>Z.value=o),class:"block w-full rounded-lg border-gray-300"},[(c(!0),m(O,null,Y(E(W),o=>(c(),m("option",{key:"t-"+o,value:o},d(o),9,Mt))),128))],512),[[B,Z.value]])])]),t("div",$t,[t("button",{class:"block w-full h-12 px-8 rounded-full bg-primary text-white hover:bg-primary-dark",onClick:me},"Ok"),t("button",{class:"block w-full h-12 px-8 rounded-full border border-gray-300",onClick:e[15]||(e[15]=o=>g.value=!1)},"Cancel")])])])):A("",!0),M.value?(c(),m("div",At,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[16]||(e[16]=o=>M.value=!1)}),t("div",Et,[t("div",Rt,[e[42]||(e[42]=t("h3",{class:"text-lg font-semibold text-gray-800"},"UPDATE TICKET STATUS",-1)),t("button",{class:"text-red-500",onClick:e[17]||(e[17]=o=>M.value=!1)},"✕")]),t("div",Pt,[((p=b.value)==null?void 0:p.status)==="pending"||((h=b.value)==null?void 0:h.status)==="in_progress"?(c(),m(O,{key:0},[t("label",{class:S(["flex items-center justify-between p-4 rounded-xl border cursor-pointer",i.value==="ready"?"border-fuchsia-500 bg-fuchsia-50":"border-gray-200"]),onClick:e[19]||(e[19]=o=>i.value="ready")},[e[43]||(e[43]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"h-3 w-3 rounded-full bg-fuchsia-600"}),t("span",{class:"text-fuchsia-700 font-medium"},"Car Ready By Employee")],-1)),v(t("input",{type:"radio",class:"hidden",value:"ready","onUpdate:modelValue":e[18]||(e[18]=o=>i.value=o)},null,512),[[Q,i.value]])],2),t("label",{class:S(["flex items-center justify-between p-4 rounded-xl border cursor-pointer",i.value==="delivered"?"border-emerald-500 bg-emerald-50":"border-gray-200"]),onClick:e[21]||(e[21]=o=>i.value="delivered")},[e[44]||(e[44]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"h-3 w-3 rounded-full bg-emerald-600"}),t("span",{class:"text-emerald-700 font-medium"},"Car Delivered By Employee")],-1)),v(t("input",{type:"radio",class:"hidden",value:"delivered","onUpdate:modelValue":e[20]||(e[20]=o=>i.value=o)},null,512),[[Q,i.value]])],2)],64)):((y=b.value)==null?void 0:y.status)==="ready"?(c(),m("label",{key:1,class:"flex items-center justify-between p-4 rounded-xl border cursor-pointer border-emerald-500 bg-emerald-50",onClick:e[23]||(e[23]=o=>i.value="delivered")},[e[45]||(e[45]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"h-3 w-3 rounded-full bg-emerald-600"}),t("span",{class:"text-emerald-700 font-medium"},"Car Delivered By Employee")],-1)),v(t("input",{type:"radio",class:"hidden",value:"delivered","onUpdate:modelValue":e[22]||(e[22]=o=>i.value=o),checked:""},null,512),[[Q,i.value]])])):A("",!0)]),t("div",Vt,[t("button",{class:"w-full h-12 rounded-full bg-primary hover:bg-primary-dark text-white disabled:opacity-50 disabled:cursor-not-allowed",onClick:xe,disabled:!i.value}," Update Status ",8,qt)])])])):A("",!0),s.qrModalOpen?(c(),m("div",Nt,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[24]||(e[24]=o=>s.qrModalOpen=!1)}),t("div",Bt,[t("div",Ot,[t("h3",Lt,"Ticket Number# "+d(($=b.value)==null?void 0:$.reference),1),t("button",{class:"text-red-500",onClick:e[25]||(e[25]=o=>s.qrModalOpen=!1)},"✕")]),t("div",Ut,[t("div",zt,[t("img",{src:((q=b.value)==null?void 0:q.qr_url)||Ht,alt:"QR",class:"h-40 w-40 object-contain"},null,8,Ft)]),e[46]||(e[46]=t("div",{class:"mt-6 space-y-3"},[t("button",{class:"w-full h-11 rounded-xl border border-indigo-300 text-indigo-700"},"Print Full Ticker QR"),t("button",{class:"w-full h-11 rounded-xl border border-indigo-300 text-indigo-700"},"Print Ticket Number")],-1))])])])):A("",!0)]}),_:1}))}},Wt=De(It,[["__scopeId","data-v-50792ee7"]]);export{Wt as default};
